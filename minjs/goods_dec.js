"use strict";require(["../minjs/common_js/config"],function(){require(["jquery","common"],function($){$("#footer_load").load("footer.html"),require(["header"],function(){$(function(){function getAreaStr(t,i){t=[];for(var e in i)t.push(getCityName(i[e]));return t}function getCityName(t){return-1!=t.indexOf(",")?t.split(",")[1].slice(0,4):t}$(".img_a_1").text("全球购"),$(".img_a_2").text("精品闪购"),$(".banner_top_first").hover(function(){$(".banner_top_first_lists").stop().slideDown(200)},function(){$(".banner_top_first_lists").stop().slideUp(200)});var cursor=$(".cursor"),mag=$(".mag"),cav=$(".goods_display_top"),thumb=$(".goods_display_thumbnail");$(thumb).find(".goods_display_img").mouseenter(function(t){var i=(t=t||event).target||t.srcElement;i.src&&$(cav).find("img").attr("src",i.src),$(i).find("img")&&$(cav).find("img").attr("src",$(i).find("img").attr("src"))}),cav.mousemove(function(t){var i=cursor.outerWidth(!0),e=mag.width()/i,s={left:t.clientX+$(window).scrollLeft()-$(this).offset().left,top:t.clientY+$(window).scrollTop()-$(this).offset().top};s.left>=i/2&&s.top>=i/2&&s.left<=$(this).width()-i/2&&s.top<=$(this).height()-i/2?(cursor.css({left:s.left-i/2,top:s.top-i/2,display:"block"}),mag.stop().fadeIn(100),mag.find("img").css({left:-(s.left-i/2)*e,top:-(s.top-i/2)*e,width:mag.width()*e,height:mag.height()*e})):(cursor.css("display","none"),mag.stop().fadeOut(50))});var user_collect=$(".user_collect");user_collect.click(function(){$(this).toggleClass("user_collect_active")});var purchase_add=$(".purchase_add"),purchase_del=$(".purchase_del");purchase_add.click(function(){$(this).siblings(".purchase_num2").text(parseInt($(this).siblings(".purchase_num2").text())+1),$(this).siblings(".purchase_del").css("background","white")}),purchase_del.click(function(){0==parseInt($(this).siblings(".purchase_num2").text())?$(this).css("background","#EEEEEE"):$(this).css("background","white").siblings(".purchase_num2").text(parseInt($(this).siblings(".purchase_num2").text())-1)});var req=new XMLHttpRequest,citys_main=$(".citys_main"),citys_lists=$(".citys_lists"),city_select=$(".citys");req.open("get","/api/h5-web/ui/h5resource/js/newConfirmOrder/confirmOrder.js?v=170223",!0),req.send(),req.onload=function(){function tirm(t){var i=t.split("\t"),e="";i=i.filter(function(t,i){return""!=t});for(var s in i)e+=i[s];return e}function citys_main_li_click(){$(citys_main).click(function(t){(t=t||event).stopPropagation();var i=t.target||t.srcElement;if($(i).find("a"))if(-1!=provice.indexOf($(i).text()))provice_index=provice.indexOf($(i).text()),sty(1),$(this).find("a").addClass("a_active").parent().siblings().find("a").removeClass("a_active"),city_item=getAreaStr(city_item,getCityName(city_arr[provice_index])),citys_main.html(template("temp_city",city_item)),citys_main.find("li").eq(0).find("a").addClass("a_active");else if(-1!=city_item.indexOf($(i).text()))city_index=city_item.indexOf($(i).text()),sty(2),$(this).find("a").addClass("a_active").parent().siblings().find("a").removeClass("a_active"),district_item=getAreaStr(district_item,getCityName(district_arr[provice_index][city_index])),citys_main.html(template("temp_city",district_item)),citys_main.find("li").eq(0).find("a").addClass("a_active");else{district_index=district_item.indexOf($(i).text());var e=provice[provice_index]+city_item[city_index]+district_item[district_index];city_select.children("em").text(e),citys_main.find("li").eq(0).find("a").addClass("a_active"),citys_lists.slideUp(100)}})}function sty(t){return $(".citys_lists ul li").eq(t).addClass("li_active").siblings().removeClass("li_active")}eval(req.response);var provice_index=0,city_index=0,district_index=0,provice=[],city_arr=[],city_item=[],district_arr=[],district_item=[];for(var val in areaData[0])provice.push(getCityName(areaData[0][val]));for(var val in areaData[1])city_arr.push(getCityName(areaData[1][val]));for(var val in areaData[2])district_arr.push(getCityName(areaData[2][val]));city_select.click(function(t){t.stopPropagation(),citys_lists.slideToggle(100),citys_lists.css("display","block"),$(".citys_tit").find("li").eq(0).addClass("li_active").siblings().removeClass("li_active"),citys_main.html(template("temp_city",provice)),citys_main.find("li").eq(0).find("a").addClass("a_active"),citys_main_li_click()}),$(".citys_tit").children().children("li").each(function(t,i){$(this).click(function(t){(t=t||event).target||t.srcElement;t.stopPropagation(),$(this).addClass("li_active").siblings().removeClass("li_active"),"省份"==$(this).text()?(citys_main.html(template("temp_city",provice)),citys_main.find("li").eq(0).find("a").addClass("a_active"),citys_main_li_click()):"城市"==$(this).text()?(city_item=getAreaStr(city_item,getCityName(city_arr[provice_index])),citys_main.html(template("temp_city",city_item)),citys_main.find("li").eq(0).find("a").addClass("a_active")):(district_item=getAreaStr(district_item,getCityName(district_arr[provice_index][city_index])),citys_main.html(template("temp_city",district_item)),citys_main.find("li").eq(0).find("a").addClass("a_active"))})})};var req2=new XMLHttpRequest;req2.open("get","/inpin/product/proComment?dataType=json&offset=0&max=15&sort=createDate&order=desc&id=1930&type=1",!0),req2.send(),req2.onload=function(){$(".user_comment_parent").html(template("user_comment",JSON.parse(req2.response).commentList))};var req3=new XMLHttpRequest;req3.open("get","http://localhost:8000/self2.json"),req3.send(),req3.onload=function(){var t=JSON.parse(req3.response),i=template("temp_goods_lists",t);$(".others_left_goods").html(i)};var others_tab=$(".others_right_tit");others_tab.children().click(function(t){var i=(t=t||event).target||t.srcElement;$(this).addClass("others_right_tit_active").siblings().removeClass("others_right_tit_active"),-1!=$(i).text().indexOf("商品介绍")?$(".others_right_comment").children().css("display","block"):-1!=$(i).text().indexOf("参数及包装")?$(".others_right_goods_dec").css("display","none").siblings().css("display","block"):-1!=$(i).text().indexOf("售后服务")?($(".others_right_goods_dec").css("display","none").siblings().css("display","block"),$(".goods_par").css("display","none")):($(".user_comment_tit").css("display","block").siblings().css("display","none"),$(".comment_page_limit").css("display","block"))})})})})});